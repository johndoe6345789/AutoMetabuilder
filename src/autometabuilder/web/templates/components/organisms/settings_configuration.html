{# Settings configuration card macro. #}
{% macro settings_configuration() -%}
{% set settings_desc = metadata.get('settings_descriptions', {}) %}
<div class="amb-card">
    <div class="amb-card-header">
        <h5><i class="bi bi-gear"></i> {{ t('ui.settings.configuration', 'Configuration') }}</h5>
    </div>
    <div class="amb-card-body">
        {% for key in ['GITHUB_REPOSITORY', 'LOG_LEVEL', 'APP_LANG', 'PROMPT_PATH'] %}
        {% set desc = settings_desc.get(key, {}) %}
        {% set desc_label = desc.get('label', key) %}
        {% set desc_text = desc.get('description', '') %}
        {% set desc_placeholder = desc.get('placeholder', '') %}
        <div class="amb-form-group">
            <label class="amb-form-label">{{ t(desc_label, desc_label) }}</label>
            {% if desc_text %}
            <p class="text-muted small mb-2">{{ t(desc_text, desc_text) }}</p>
            {% endif %}
            {% if desc.get('type') == 'select' %}
            <select name="env_{{ key }}" class="form-select" data-choices>
                <option value="">{{ t('ui.common.select_placeholder', 'Select...') }}</option>
                {% for opt in desc.get('options', []) %}
                <option value="{{ opt }}" {% if env_vars.get(key) == opt %}selected{% endif %}>{{ opt }}</option>
                {% endfor %}
            </select>
            {% else %}
            <input type="{{ desc.get('type', 'text') }}"
                   name="env_{{ key }}"
                   class="form-control"
                   value="{{ env_vars.get(key, desc.get('default', '')) }}"
                   placeholder="{{ t(desc_placeholder, desc_placeholder) }}">
            {% endif %}
        </div>
        {% endfor %}
    </div>
</div>
{%- endmacro %}
